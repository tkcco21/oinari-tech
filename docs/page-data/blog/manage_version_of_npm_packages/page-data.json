{"componentChunkName":"component---src-templates-blog-post-index-jsx","path":"/blog/manage_version_of_npm_packages/","result":{"data":{"markdownRemark":{"id":"24991220-ebb7-567d-8b88-3a4aa7b0e4f9","html":"<p>npmパッケージのバージョン管理をしてくれる「Renovate」というツールの紹介です。npmだけでなくさまざまな言語のパッケージ・ライブラリのバージョン管理をしてくれます。</p>\n<!-- excerpt end -->\n<p>どうも、フロントエンドエンジニアの<code class=\"language-text\">tkcco21</code>（ティーケーシーコーとお呼びください）です。</p>\n<p>今日、フロントエンドの開発において業務でも個人制作でも、npmパッケージを使わないという選択肢はほぼないと思います。<br>\nnpmはめちゃめちゃ便利ですが、バージョン管理はかなり手間ですよね。<br>\nGitHubでリポジトリ管理をしていると、少し古くなると下記のような注意文言（アラート）が表示されます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b7fdc2839ad4637e099b9a5985f05d85/1b19f/01_alert.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.181634712411707%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAA7klEQVQY0zWQyW7CQBBE/f055cYpl3wMEkJAAkmAsIgEjDeMx+MxHuOxX1pWODxVdZW6D+217R1jFEWhaF1NJ3NZasny3nfdve+0zqS3OHcnyQria4GxDXlpidKMi9JUVY1nzSelGgsTKj3DFm+U+YSbYIuZZOL1FGvmuOqDm/lif16zPa04hBu+T1vmuxXv+zW/xyWeyRZcwyEqHvXoy5g0GJJFIzm6oEin1GYJ7kc4QCfKgwPOHqnziFqF0KR4KldEcYjKM4LwTBgFNI2VxUYWnND++0beoPEDnziJe02SBP/iM9i98rx54Wk54A+ckSwp0h9J9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GitHubでは、古くなりセキュリティ的にまずくなるとSecurity Alertsを表示してくれます。\"\n        title=\"GitHubでは、古くなりセキュリティ的にまずくなるとSecurity Alertsを表示してくれます。\"\n        src=\"/static/b7fdc2839ad4637e099b9a5985f05d85/1d69c/01_alert.png\"\n        srcset=\"/static/b7fdc2839ad4637e099b9a5985f05d85/4dcb9/01_alert.png 188w,\n/static/b7fdc2839ad4637e099b9a5985f05d85/5ff7e/01_alert.png 375w,\n/static/b7fdc2839ad4637e099b9a5985f05d85/1d69c/01_alert.png 750w,\n/static/b7fdc2839ad4637e099b9a5985f05d85/1b19f/01_alert.png 991w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>こういう表示をしてくれるのは悪いことではなく、むしろ良いことなのですが。<br>\n「アップデートしなきゃ」って意識するし、アップデートって腰が重いし、気にし続けてしまうのは精神衛生上いいものではありません。</p>\n<p>そこでおすすめしたいのがnpmパッケージ（モジュール）のバージョン管理をしてくれるツールの<code class=\"language-text\">Renovate</code>です。</p>\n<h2>Renovate</h2>\n<p>Renovateとは、package.jsonを見て古くなっているものがあれば、自動的にそのパッケージのアップデートのプルリクエストを作ってくれるものです。</p>\n<p>設定によっては、パッチ・マイナーアップデートはプルリクエストをまとめたり、プルリクエストを作ってくれるスケジュールを指定できたり、プルリクエストのターゲットブランチを指定できたりします。</p>\n<p>その説明は後ほどするとして、基本的な使い方を見てみましょう。</p>\n<p>使い方としては、GitHubやGitLabなどと連携させて使います。今回は例としてGitHubと連携させます。</p>\n<h2>GitHubと連携させよう</h2>\n<p>まず、下記のURLにアクセスします。</p>\n<p><a href=\"https://github.com/marketplace/renovate\" target=\"_blank\">RenovateのGitHubセットアップページ</a></p>\n<p>今回はnpmパッケージのバージョン管理のために使いますが、上記URLのページに「Multi-language Dependency Automation」とあるように、Java/PHP/Rubyなどでも利用可能です。</p>\n<p>ページ下部にある、下記画像部分の「Install it for free」をクリックします。<br>\n個人利用の場合は、パブリックリポジトリであれプライベートリポジトリであれ、無料で利用可能です。<br>\n<strong>※ 無料ではなくなる可能性もあるのでそれは自己責任でお願いします。</strong></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3a82d6c1957e30dc1e8906499551fe3d/01645/02_setup.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.62144821264895%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABoElEQVQoz4WSy2sTURSHZ+natZvi3yXo1o1L0dCduFCI/gduBUEXoqVuRBBbwQe0KY6NbV5NMpN5ZV73zuNmPu9MmJJAxQsfhwOH3z3n/I6xsG2chY3ve030XJeyLLYQ2RqZ5Zpim7wglXlDXWN87Q359M3k8HjA5599Do/OmLiCqS+ZemtikROlOWFasNSxJUgyvFCQq1VDLDKMG/fPuNkZsPPgnJ2H51y7e4px5wTjdg/jVo/r90zMmSCMU07HDlM3vsReZuQVvNwzebVvsqpWGE/3bJ59WNDdX/Pkvc3jdza7byw6r+c8emthLfU4SUz/T5/JZMzFxZjRaIjjLKjfwY8JB99Ha0EoodJsRtQW9Z6EzJCxZPNVVYVaVZd5Uo9c7+cqog1EVhKKmN/ekF/BnJGwiIoEVa60aSV5Xpun9Kc5RuvQv0h0Z6qAE7/P7tFzuuYLOsddPk6/oNLadYmUEqVUU2+0J3EV7SnUMdNdJpHEdUIcN2HuRMzcEMsJcIO4Oan/CrZirXCUCvww0e4KBnbKzK/zlEDvVjSCBX8BthKchgpqkAMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ページ下部に「Install for free」のボタンがあるので、そこをクリック\"\n        title=\"ページ下部に「Install for free」のボタンがあるので、そこをクリック\"\n        src=\"/static/3a82d6c1957e30dc1e8906499551fe3d/1d69c/02_setup.png\"\n        srcset=\"/static/3a82d6c1957e30dc1e8906499551fe3d/4dcb9/02_setup.png 188w,\n/static/3a82d6c1957e30dc1e8906499551fe3d/5ff7e/02_setup.png 375w,\n/static/3a82d6c1957e30dc1e8906499551fe3d/1d69c/02_setup.png 750w,\n/static/3a82d6c1957e30dc1e8906499551fe3d/01645/02_setup.png 1091w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>下記のようなページが表示されます。<br>\n「Complete order and begin installation」をクリックします。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9663815b221e27edef96dff711627bd9/2cffa/03_installation.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.9010989010989%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABg0lEQVQoz4VSy07DMBDM73NHSJUQcACJAqeChIADBxAIBAduLRRQ82qaxEnTNIkT2xlsh1RtxWOt0a5Xu+NZ2wbnHLZtwfPGiEiofeD7+M/qutZo49YMxjheRxMMrQAfDsHQDvHpRiApQzRnSIoalAkIwZGmKSilKwRtXJYVqqqCoTYBmcK0x/DDCJ4fSh9DlY3cGTY6tygrDsYqmJaNOJ5K8nqhsCVU+SzLvwmDAI7jyGSMKCIghKAqKbK8wuOLIwkE1NWQKNZNlJY615JxLuCOxyiKAoZKllKqali/o0UsQWWxY43gTSaSNNN5saZS36HaTJMEeV6sjNFCna4sCnz0el2YfowgycFE/X1UrZdAU68JGWNaoRrjN6hekQkwKW6ecOQzpn2Ryr5MTpc3Ko2fvsI6lKWS6cK5wbl7j0v7GWejB5yZT7iQ8ZV7h1PrGl4RNgr/+2/KCI3RGXax1T/A7uAY2/0udgZH2Hs9QWdwiM23fbynZkP4F9YfaPFKy1iyL65hAlz1LsAxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"「Complete order and begin installation」をクリック\"\n        title=\"「Complete order and begin installation」をクリック\"\n        src=\"/static/9663815b221e27edef96dff711627bd9/1d69c/03_installation.png\"\n        srcset=\"/static/9663815b221e27edef96dff711627bd9/4dcb9/03_installation.png 188w,\n/static/9663815b221e27edef96dff711627bd9/5ff7e/03_installation.png 375w,\n/static/9663815b221e27edef96dff711627bd9/1d69c/03_installation.png 750w,\n/static/9663815b221e27edef96dff711627bd9/2cffa/03_installation.png 1092w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>下記のようなページに遷移します。</p>\n<p>「All repositories」もしくは「Only select repositories」のどちらかを選択します。<br>\nここは個人の裁量で問題ないです。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a0f4217807d0576ed865dc717d2c378d/105d8/04_select.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 110.85470085470087%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAACeklEQVQ4y51Uy24TMRTN94AQEq+qadNSBBILfokFC1iyYNH/6B6BBBtWSEhI0CRNqCBtM5N5eV5+TOZwryeTRNMQdbB05Gv7+vjce213nj5/gd7RMxwQ9g6fYLd3ZLGz/xhdGj/s9tA9oDnCzt4hbt+9j1sN3Ln3CA9292m9h87pcIT+cIzB2Zj6EXh8OqA5Gg9H5xiOf2F0/htjAts/+kP8XIMdD84sB+/rmDmwCbpglOD26t1HvHz7wdpNv6Ix7iSZxL8QpxLKGLw5/oTXx5+hyd7mz+hkUmMdaa6Wdq4MQpHAmc0ILvxQ0LzZ6FujQajIqbJFHCNOEgRBCM8PEIkYxhSYz0vEsSA1+ZJ0nXijQkUJTIjMJWWSDtHa2HDLssqpMax+pXALYXWa1Bpe6GHquPA8H1mWQSpF6uaom6JDbkC4UGg4dxEml1NcXE1ps0azyVaEFDKHGoQR5SuhEKtwOX+sktGOkJKf5zmmUweO41iFlrCsCPmAVoTsHFOV/SCAEGJZjP8PmRR4oQ/XndGV8ZGmqa06F4evklKqXVE0vScmYkJWyiqjKCIIhNQzebuQ6Y6xmjTNbL44b0XBKCxuXJTVgsLF5SX+TCZWJefSp9fCd5L71iFzlaFL6Ezb/LEiLkwNoNyusH6P9UIiJU4m7/HF/UZPjLc3q3ydsLY3EqZE+PXqO/qzMRL6wjiffC9T6vXi1UhlFnsahNe/IIWcehhgTmHnUtk5i1zZMRctr784ubKZyyrkjzGKUwhSE6XKIkhyhAl9movT2YdJ44zW4pVfmFTg+WXI/DPzRxoRSZAwmbQ9OzIhK2Mf60sbPbFaZ3K2RVoR/gWReHmn1t51qgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Renovateの監視対象とするリポジトリの選択\"\n        title=\"Renovateの監視対象とするリポジトリの選択\"\n        src=\"/static/a0f4217807d0576ed865dc717d2c378d/1d69c/04_select.png\"\n        srcset=\"/static/a0f4217807d0576ed865dc717d2c378d/4dcb9/04_select.png 188w,\n/static/a0f4217807d0576ed865dc717d2c378d/5ff7e/04_select.png 375w,\n/static/a0f4217807d0576ed865dc717d2c378d/1d69c/04_select.png 750w,\n/static/a0f4217807d0576ed865dc717d2c378d/78797/04_select.png 1125w,\n/static/a0f4217807d0576ed865dc717d2c378d/105d8/04_select.png 1170w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>選択したら、「Install」をクリックします。</p>\n<p>これで設定は完了です。</p>\n<h3>作成された初プルリクエストを見てみよう</h3>\n<p>先程の設定から少々時間がかかるので、小1時間ほど気長に待ちましょう。</p>\n<p>実際のプルリクエストを確認していきます。</p>\n<p>設定がちゃんとできていれば、記念すべき1つ目のプルリクエストが作成されます。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/06f1b32eb58f808594ce57245b76d73c/1628f/05_config_pr.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70.37337662337661%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAACGUlEQVQ4y3VTSZITQQz0p2FYB4IZ4wUPE3yEO6/gAMEJLna37V6r972dpNRu20OYilBIqiUrlaqazD99xnz5gOniAe/vF7i9W+ButsR89YgFbbZcYfX4ReN3d1PcvHqLZy/f4MXrWzxnLPkN4/vZAh+mHzHBceQtkDZAVDHpmbTluIQDzqPrgaKs0XOybjrNL9cnTduipeVxjig0CAIfnuvA91wURcHDpfpSfFkhZ1xVtfqiKHW9ZF43DQRLGTZk9PX3N3z/8xO2tcN6Y2HvuMirFiVZpDWQVT0Oh0su51HXzWlNAfu+h20cRFmKruvIoELTtMjykkzIggziJOOcHBz2j9Bt18JUEbpDfwYsqcmPXxbLjeCFMS1BaGL4gUEYxQqaZgUy+jjNNJeS5QJl2DbU9MhwpCreo2723lNzHDKOYyRJSnYJfXLywjBJU16SaayM/wWUSWMMfN9Hxo1StjRi8DR6ieuaHWaLRTdpjjRU2D0BHBMTRXBcT00OjswHw9GGPGXpAqZPibpfBZTyPM9HGIanzZfjcq9qyD2Sd9dKVg1Z7sayYNtbuJ6njEU3Ef/yAtmb54WWPcp1lWGe59jvHbiuq03Z7fbY7nawbJvv0lFNRxApOYoTfV4V5bkKGLOr6/VmYLndKlMBDCiBWMrOyqWimQAaE+lv+a+GUp6w8YNAtRSQkN9RDkuTxi6LBNL54Yc8/Sl/Ac4MJuBNc65vAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"「Configure Renovate」というプルリクエストが作られている\"\n        title=\"「Configure Renovate」というプルリクエストが作られている\"\n        src=\"/static/06f1b32eb58f808594ce57245b76d73c/1d69c/05_config_pr.png\"\n        srcset=\"/static/06f1b32eb58f808594ce57245b76d73c/4dcb9/05_config_pr.png 188w,\n/static/06f1b32eb58f808594ce57245b76d73c/5ff7e/05_config_pr.png 375w,\n/static/06f1b32eb58f808594ce57245b76d73c/1d69c/05_config_pr.png 750w,\n/static/06f1b32eb58f808594ce57245b76d73c/78797/05_config_pr.png 1125w,\n/static/06f1b32eb58f808594ce57245b76d73c/1628f/05_config_pr.png 1232w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>この1つ目のプルリクエストでは、「Configure Renovate」というタイトルになっています。<br>\nそのタイトル通り今後Renovateを使っていく上での初期設定のようなもので、Renovateの設定ファイルである「renovate.json」を追加するプルリクエストです。</p>\n<p>この設定ファイルの「renovate.json」に追記して、カスタマイズしてきます。</p>\n<h3>2つ目以降のプルリクエスト</h3>\n<p>Renovateを導入して、1つ目のプルリクエストは「renovate.json」を追加するものですが、2つ目以降は実際のバージョン管理のためのプルリクエストになります。</p>\n<p>例として、いくつか見てみましょう。</p>\n<p><code class=\"language-text\">npm i &lt;パッケージ名&gt;</code>でインストールすることがほとんどだと思いますが、これでインストールすると「package.json」のバージョン記載は<code class=\"language-text\">^9.4.7</code>のように固定されていないものになります。</p>\n<p>Renovateを使う場合には、バージョンの記載を固定にしないといけないようで。<br>\n2つ目のプルリクエストはバージョンの記載を固定にするものになります。</p>\n<p>Pin dependencies</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4d7ca5d4bbef07b6eaef61e4c172a1c5/d56e1/06_pin.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.42477876106194%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACDklEQVQ4y3VTyZLTMBDN//8Rv8CBA1BTUwOETFbH8SZrl6U8ulvj5ACoytW2pX5+S3uTYsK3L7/x+rLF7n2H9/0B1/aGkBaU+x1L/rjKHTlnlFLA6057fPFKdDYQDq/NEgs+f7rg7WsDbWYoNUNrA+MXGBegXMZoFkw6wFlLzbVxXQyaloSyLBUw0oH9pYH1Ft5HOOdhraN7L+AxRhhjMM8akZikJQubnIuwzSUTkQnJ2QroiMX31xO6fkRzbdHeOqo33LoBPkSkzE0sm2sRMEfv+aPW2gfTUqr8zfNFEXbMqtBXM0nw9MxVay37bAX7yIsVGHpeaF+Y5urtRoy9F3QqYnu2OLaa5JNvk6KQDuiHkSSRZBPQdBpKe2k0xooN7GkFzCugWIvJRDS9F/N9SFB0+Np2mJQW6YoAx5n3vQQRQngExNOwpl8ZEmA7BewaR6bXcen6Ab+2O/K0h3UOg/I43wxuo5NGR+8YdPUvPwErw36OOLROmM4uYRgVDsczSZ7EW2Z2HazUCugF9L+AiiUPXupsk0jl1EcKyfkgHnaTk1pDCeLjA/DpYZXMobwdLfbCcqGx6fHj51Z8NDQi7N+JJHPlxYFczg0Uhcds+W/5OxRiGGIdg3GacaKGgRuIDYfC/injH2PD1zpy5V+SL5RyO3n57Tjl8+UqwP4DkCX3ak05ykgN40T2zI9/+Q8m9/BebNuFyAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"package.jsonのバージョンを固定する記述に変更するプルリクエスト\"\n        title=\"package.jsonのバージョンを固定する記述に変更するプルリクエスト\"\n        src=\"/static/4d7ca5d4bbef07b6eaef61e4c172a1c5/1d69c/06_pin.png\"\n        srcset=\"/static/4d7ca5d4bbef07b6eaef61e4c172a1c5/4dcb9/06_pin.png 188w,\n/static/4d7ca5d4bbef07b6eaef61e4c172a1c5/5ff7e/06_pin.png 375w,\n/static/4d7ca5d4bbef07b6eaef61e4c172a1c5/1d69c/06_pin.png 750w,\n/static/4d7ca5d4bbef07b6eaef61e4c172a1c5/78797/06_pin.png 1125w,\n/static/4d7ca5d4bbef07b6eaef61e4c172a1c5/d56e1/06_pin.png 1130w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>1つ目2つ目のプルリクエストが取り込まれると、対象のパッケージごとのプルリクエストが作られるようになります。</p>\n<p>Update dependency webpack-cli to v3.3.10</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/26b60e3762fc698855c761cb6fcd0ab2/d56e1/07_update.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.41592920353982%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABvElEQVQoz2VTXXObMBD0//9bfexL2ulLZjJOE5s4CINBEvoAic3dCYjditk5RuhWu3fHIecFv34e8efpBW/v7zgeX3E6nXE6Vzi+vqG6KEKNc3XB5fKJtuvBa1kWAa9pmhFClPcD7/3+ofD8VMOOBlobGMJgA3pt0Zko6I2DNZaSJ9wvJp3mCSmnQphSwl+6XVuD0Xk4H2DMCC/RIsaIcXTQxiDEiZKTRM7LOQuRtj18dIWQ5T6/1Li2PWqloJqWcJWYqByzJHLMO5kPfMkIa8ddKZ/h57Bt+BCkPpEShkFLTThO84xbr0lRfrDqvZfy8PkkSvNWw1LcMGVYn+VA3w9wZJ+thjiTJS+Rz4kSqrtzTjDPq/WUvgl5dV2HM3V20Pqhi+X7spJlgQigGm8N2r4J4b2FniyyKuYoKIoK0bKDFzuI66hsZx4U9rcblGpQ10rUzlQ7xj4ed2OyrAKY9D+Fu+WmQVV9oKEOt21HpDcBjw83iMeH37dET2TcNM7n+s3/1lDpKz5VLZ0r0JLA88dNYvAFoyvzZmhfkZuB9vmizc2dwg+yXMswy98iUa8w+whtTeH6sfLvZhWeLzHJpdUuEqCoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"対象パッケージをアップデートするプルリクエスト\"\n        title=\"対象パッケージをアップデートするプルリクエスト\"\n        src=\"/static/26b60e3762fc698855c761cb6fcd0ab2/1d69c/07_update.png\"\n        srcset=\"/static/26b60e3762fc698855c761cb6fcd0ab2/4dcb9/07_update.png 188w,\n/static/26b60e3762fc698855c761cb6fcd0ab2/5ff7e/07_update.png 375w,\n/static/26b60e3762fc698855c761cb6fcd0ab2/1d69c/07_update.png 750w,\n/static/26b60e3762fc698855c761cb6fcd0ab2/78797/07_update.png 1125w,\n/static/26b60e3762fc698855c761cb6fcd0ab2/d56e1/07_update.png 1130w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>プルリクエストを確認してマージしよう</h3>\n<p>わかっているとは思いますが、プルリクエストが作られたからと言って、全てマージしていいわけではありません。</p>\n<p>マイナーアップデートは無意識的にマージしてしまってもおそらく問題ないかなと思いますが、どういうアップデートがされているかくらいは確認したほうが得策でしょう。<br>\nプロジェクト内のコードに含まれるパッケージなら尚更です。</p>\n<p>メジャーアップデートに関しては、破壊的変更も大いに有り得るので絶対確認しましょう。</p>\n<p>どこで確認すればいいのかというと、下記プルリクエストの画像の中に「Release Notes」というものがあり、対象パッケージのアップデート内容がまとまっているのでそれで確認が可能です。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 750px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b7fdc2839ad4637e099b9a5985f05d85/1b19f/01_alert.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.181634712411707%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAA7klEQVQY0zWQyW7CQBBE/f055cYpl3wMEkJAAkmAsIgEjDeMx+MxHuOxX1pWODxVdZW6D+217R1jFEWhaF1NJ3NZasny3nfdve+0zqS3OHcnyQria4GxDXlpidKMi9JUVY1nzSelGgsTKj3DFm+U+YSbYIuZZOL1FGvmuOqDm/lif16zPa04hBu+T1vmuxXv+zW/xyWeyRZcwyEqHvXoy5g0GJJFIzm6oEin1GYJ7kc4QCfKgwPOHqnziFqF0KR4KldEcYjKM4LwTBgFNI2VxUYWnND++0beoPEDnziJe02SBP/iM9i98rx54Wk54A+ckSwp0h9J9wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"01 alert\"\n        title=\"01 alert\"\n        src=\"/static/b7fdc2839ad4637e099b9a5985f05d85/1d69c/01_alert.png\"\n        srcset=\"/static/b7fdc2839ad4637e099b9a5985f05d85/4dcb9/01_alert.png 188w,\n/static/b7fdc2839ad4637e099b9a5985f05d85/5ff7e/01_alert.png 375w,\n/static/b7fdc2839ad4637e099b9a5985f05d85/1d69c/01_alert.png 750w,\n/static/b7fdc2839ad4637e099b9a5985f05d85/1b19f/01_alert.png 991w\"\n        sizes=\"(max-width: 750px) 100vw, 750px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>「Release Notes」で確認が済んだら、次は開発環境を立ち上げて確認しましょう。<br>\n目視で挙動を確認するのは必須です。</p>\n<p>どちらも済んだらマージしましょう。  </p>\n<h2>設定ファイル「renovate.json」をカスタマイズしよう</h2>\n<p>1つ目のプルリクエストで作られた「renovate.json」の内容は、最低限の設定しか書かれていません。</p>\n<p>なので、プルリクエストのターゲットとなるブランチは<code class=\"language-text\">master</code>になっているし、パッケージごとに無尽蔵にプルリクエストが作られていきます。</p>\n<p>こうなると結局、最初に述べた下記のような意識になってしまいます。</p>\n<blockquote>\n<p>「アップデートしなきゃ」って意識するし、アップデートって腰が重いし、気にし続けてしまうのは精神衛生上いいものではありません。</p>\n</blockquote>\n<p>設定に関しては、下記にすべて書かれているので、こちらを参考にしてください。</p>\n<p><a href=\"https://docs.renovatebot.com/configuration-options/\" target=\"_blank\">Configuration Options | Renovate Docs</a></p>\n<p>設定ファイルを更新すると、それまでに作られた更新後の設定ファイルにそぐわないプルリクエストは勝手にクローズしてくれるので、一旦放置でもいいと思います。</p>\n<h3>僕の設定ファイル</h3>\n<p>僕は個人的なリポジトリにしか利用していないので、そこまで凝った設定はしていませんが下記のような「renovate.json」にしています。</p>\n<p>上から、</p>\n<ul>\n<li>\n<p>ターゲットとするブランチを「develop」</p>\n<ul>\n<li>マージしてバグがおきても、masterには影響がない。</li>\n</ul>\n</li>\n<li>\n<p>プルリクエストを作るのは「毎週末」</p>\n<ul>\n<li>作業は平日の業後もしくは週末なので、日々更新されなくてもいい。</li>\n</ul>\n</li>\n<li>\n<p>minorアップデートはグループ化、グループ名は「all dependencies」</p>\n<ul>\n<li>パッチ・マイナーアップデートは「Update all dependencies」という1つのプルリクエストにまとめてくれる。</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"baseBranches\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"develop\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"schedule\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"every weekend\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"minor\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"groupName\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"all dependencies\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"extends\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"config:base\"</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>まとめ</h2>\n<p>アップデートはしなきゃなと思いつつ、下記のような手順で更新するのは\bやはり腰が重く。</p>\n<ul>\n<li><code class=\"language-text\">npm outdated</code>コマンドでアップデートできるパッケージの確認</li>\n<li>それぞれのパッケージの公式アップデート情報を確認</li>\n<li>問題なければアップデート</li>\n<li>開発環境で確認</li>\n</ul>\n<p>開発環境で確認することはRenovateを導入しても必須ですが、だいぶパッケージのアップデート作業が楽になりました。</p>\n<p>公式ページ・ドキュメントにここに書いてあることはすべて書いてあるので、参考にしてください。</p>\n<p><a href=\"https://renovate.whitesourcesoftware.com/\" target=\"_blank\">Renovateの公式ページ</a></p>\n<p><a href=\"https://docs.renovatebot.com/\" target=\"_blank\">Renovateの公式ドキュメント</a></p>","excerpt":"npmパッケージのバージョン管理をしてくれる「Renovate」というツールの紹介です。npmだけでなくさまざまな言語のパッケージ・ライブラリのバージョン管理をしてくれます。","frontmatter":{"date":"February 11, 2020","path":"/manage_version_of_npm_packages/","title":"Renovateでnpmパッケージのバージョン管理をしよう"}}},"pageContext":{"slugPath":"/blog/manage_version_of_npm_packages/","articleType":"blog"}}}